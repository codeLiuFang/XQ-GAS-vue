webpackJsonp([14],{ZPQ2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vLgD"),r={data:function(){return{tableData:[],days:"",dialogFormVisible:!1,ruleForm:{year:"",startDate:"",endDate:""},formLabelWidth:"80px",titleMap:{addDeploy:"增加配置",editDeploy:"修改配置"},dialogStatus:""}},created:function(){this.loadData(this.currentPage,this.pagesize)},methods:{callOf:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},closeDialog:function(e){this.dialogFormVisible=!1,this.$refs.ruleForm.resetFields()},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该时间?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="/heating/periods/year/"+t.year;l.a.delete(e,{params:{id:t.id}}).then(function(e){console.log(e.data),"success"===e.data.msg&&(a.$message({type:"success",message:"删除成功!"}),a.loadData(a.currentPage,a.pagesize))})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addDeploy:function(e){var t=this;this.dialogFormVisible=!0,this.dialogStatus="addDeploy",this.$nextTick(function(){t.$refs[e].resetFields()})},editDeploy:function(e,t){var a=this;this.dialogFormVisible=!0,this.dialogStatus="editDeploy",this.$nextTick(function(){a.ruleForm.year=t.year,a.ruleForm.startDate=t.startDate,a.ruleForm.endDate=t.endDate,a.id=t.id})},saveDeploy:function(e){var t=this;if("editDeploy"===this.dialogStatus){var a={id:this.id,year:this.ruleForm.year,startDate:this.ruleForm.startDate,endDate:this.ruleForm.endDate};l.a.put("/heating/periods",a).then(function(e){"success"===e.data.msg?(t.dialogFormVisible=!1,t.$message({message:"编辑成功",type:"success"}),t.$refs.ruleForm.resetFields(),t.loadData(t.currentPage,t.pagesize)):t.$message({message:e.data.msg,type:"error"})})}else if("addDeploy"===this.dialogStatus){var r={id:this.ruleForm.id,year:this.ruleForm.year,startDate:this.ruleForm.startDate,endDate:this.ruleForm.endDate};console.log(r),l.a.post("/heating/periods",r).then(function(e){"success"===e.data.msg?(t.dialogFormVisible=!1,t.$message({message:"添加成功",type:"success"}),t.$refs.ruleForm.resetFields(),t.loadData(t.currentPage,t.pagesize)):t.$message({message:e.data.msg,type:"error"})})}},loadData:function(e,t){var a=this;l.a.get("/heating/periods",{params:{pageNumber:e,pageSize:t}}).then(function(e){if("success"===e.data.msg){var t=e.data.data.rows;a.tableData=t,a.totalCount=e.data.data.total}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:function(t){e.addDeploy("ruleForm")}}},[e._v("添加")])],1),e._v(" "),e.dialogFormVisible?a("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"时间",prop:"year"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年","value-format":"yyyy"},model:{value:e.ruleForm.year,callback:function(t){e.$set(e.ruleForm,"year",t)},expression:"ruleForm.year"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"起始日期",prop:"startDate"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.startDate,callback:function(t){e.$set(e.ruleForm,"startDate",t)},expression:"ruleForm.startDate"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"结束日期",prop:"endDate"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.endDate,callback:function(t){e.$set(e.ruleForm,"endDate",t)},expression:"ruleForm.endDate"}})],1)]),e._v(" "),a("el-row")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.callOf("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveDeploy("ruleForm")}}},[e._v("确 定")])],1)],1):e._e()],1),e._v(" "),a("el-table",{ref:"testTable",staticClass:"gtable",attrs:{"header-cell-style":{"background-color":"#f6f6f6"},data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"year",label:"日期",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"起始日期",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"结束日期",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-edit-outline"},on:{click:function(a){e.editDeploy(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-close"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},o=a("VU/8")(r,s,!1,null,null,null);t.default=o.exports}});