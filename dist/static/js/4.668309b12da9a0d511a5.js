webpackJsonp([4],{"4sAu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),o=a("vLgD"),l={data:function(){return{tableData:[],name:"",multipleSelection:[],select:"",pagesize:10,highlightId:-1,currentPage:1,start:1,totalCount:1e3,dialogFormVisible:!1,dateRange:"",form:{date:"",sourcesType:[{sourcesTypeid:"",label:""}],price:""},sourcesTypeid:"",form1:{id:"",date:"",sourceName:"",price:""},gasSourceId:""}},created:function(){this.loadData(this.currentPage,this.pagesize),this.getGasSourceName()},methods:{loadData:function(e,t){var a=this;o.a.get("/gas/prices",{params:{pageNumber:e,pageSize:t}}).then(function(e){if("success"===e.data.msg){var t=e.data.data.rows;a.formateTabelData(t),a.totalCount=e.data.data.total}})},handleEdit:function(e,t){console.log(t),this.dialogFormVisible=!0,this.form1.date=t.date,this.form1.sourceName=t.sourceName,this.form1.price=t.price,this.form1.id=t.id,this.sourcesTypeid=t.gasSourceId},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该条信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="/gas/prices/"+t.id;o.a.delete(e).then(function(e){"success"===e.data.msg?(a.$message({type:"success",message:"删除成功!"}),a.loadData(a.currentPage,a.pagesize)):a.$message({message:e.data.msg,type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},getGasSourceName:function(){var e=this;o.a.get("/gas/sources").then(function(t){var a=JSON.parse(r()(t.data.data.rows));if("success"===t.data.msg){for(var s=[],o=0;o<a.length;o++)s.push({sourcesTypeid:a[o].id,label:a[o].sourceName});e.form.sourcesType=s}})},savePriceInfo:function(){var e=this,t={date:this.form.date,gasSourceId:this.sourcesTypeid,price:this.form.price};console.log(t),o.a.post("/gas/prices",t).then(function(t){"success"===t.data.msg?(e.$message({message:"添加成功",type:"success"}),e.form.date="",e.sourcesTypeid="",e.form.price="",e.loadData(e.currentPage,e.pagesize)):e.$message({message:t.data.msg,type:"error"})})},savePriceSource:function(){var e=this,t={id:this.form1.id,date:this.form1.date,sourceName:this.form1.sourceName,price:this.form1.price,gasSourceId:this.sourcesTypeid};console.log(t),o.a.put("/gas/prices",t).then(function(t){"success"===t.data.msg?(e.dialogFormVisible=!1,e.$message({message:"编辑成功",type:"success"}),e.loadData(e.currentPage,e.pagesize)):e.$message({message:t.data.msg,type:"error"})})},searchByDate:function(){var e=this;if(""===this.dateRange)this.$message({showClose:!0,message:"请选择日期",type:"warning"});else{var t=this.dateRange,a="/gas/prices/"+t[0]+"~"+t[1];o.a.get(a,{params:{pageNumber:this.pageNumber,pageSize:this.pageSize}}).then(function(t){if("success"===t.data.msg){var a=t.data.data.rows;e.formateTabelData(a),e.totalCount=t.data.data.total}})}},formateTabelData:function(e){for(var t=function(t){e[t].sourceName="",e[t].sourceType="",e[t].unitprice="",s="/gas/sources/"+e[t].gasSourceId,o.a.get(s).then(function(a){"success"===a.data.msg&&(e[t].sourceName=a.data.data.sourceName,e[t].sourceType=a.data.data.sourceType.label,e[t].unitprice=e[t].price+""+a.data.data.unit.label)})},a=0;a<e.length;a++){var s;t(a)}this.tableData=e}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pbody"},[a("el-row",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-col",{attrs:{md:3,lg:4}},[a("el-form-item",{attrs:{label:"日期"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1),e._v(" "),a("el-col",{attrs:{md:3,lg:4}},[a("el-form-item",{attrs:{label:"气源名称"}},[a("el-select",{attrs:{placeholder:"请选择气源名称"},model:{value:e.sourcesTypeid,callback:function(t){e.sourcesTypeid=t},expression:"sourcesTypeid"}},e._l(e.form.sourcesType,function(e){return a("el-option",{key:e.sourcesTypeid,attrs:{label:e.label,value:e.sourcesTypeid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{md:4,lg:3}},[a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:2,lg:4}},[a("el-form-item",[a("el-button",{staticStyle:{display:"inline-block"},attrs:{type:"primary"},on:{click:e.savePriceInfo}},[e._v("录入")])],1)],1),e._v(" "),a("el-col",{attrs:{md:4,lg:5}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)]),e._v(" "),a("el-col",{attrs:{md:2,lg:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchByDate}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{ref:"testTable",staticClass:"gtable",attrs:{data:e.tableData,"header-cell-style":{"background-color":"#f6f6f6"},border:"","default-sort":{prop:"companyName",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"date",label:"日期","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"气源类型",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceName",label:"气源名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitprice",label:"价格",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.form1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"日期"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:""},model:{value:e.form1.date,callback:function(t){e.$set(e.form1,"date",t)},expression:"form1.date"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"气源名称"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form1.sourceName,callback:function(t){e.$set(e.form1,"sourceName",t)},expression:"form1.sourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格单位"}},[a("el-input",{model:{value:e.form1.price,callback:function(t){e.$set(e.form1,"price",t)},expression:"form1.price"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.savePriceSource}},[e._v("确 定")])],1)],1),e._v(" "),a("el-pagination",{staticClass:"pstyle",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount}})],1)},staticRenderFns:[]};var c=a("VU/8")(l,i,!1,function(e){a("hkIv")},null,null);t.default=c.exports},"5luA":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.pstyle {\r\n    position: absolute;\r\n    /* top: 135%; */\r\n    /* left: 10%; */\r\n    margin-left: 15px;\n}\n.fbody {\r\n    position: relative;\n}\n.gtable{\r\n    width:90%; \r\n    border: 1px solid #d7dde9; \r\n    margin-left: 15px;\r\n    margin-top: 20px;\n}\n.htable{\r\n    background-color: #f6f6f6;\n}\r\n",""])},hkIv:function(e,t,a){var s=a("5luA");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("2ea1a7bc",s,!0)},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,t,a){var s=a("FeBl"),r=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}}});