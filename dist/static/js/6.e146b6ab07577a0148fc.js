webpackJsonp([6],{AHvR:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.pstyle {\r\n    position: absolute;\r\n    /* top: 135%; */\r\n    /* left: 10%; */\r\n    margin-left: 15px;\n}\n.fbody {\r\n    position: relative;\n}\n.gtable{\r\n    width:90%; \r\n    border: 1px solid #d7dde9; \r\n    margin-left: 15px;\r\n    margin-top: 20px;\n}\n.htable{\r\n    background-color: #f6f6f6;\n}\r\n",""])},Vsx4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("vLgD"),l={data:function(){return{tableData:[],days:"",pagesize:10,highlightId:-1,currentPage:1,start:1,totalCount:1e3,dialogFormVisible:!1,ruleForm:{date:"",weather:"",id:"",highestTemperature:"",lowestTemperature:"",windDirection:"",windLevel:""},formLabelWidth:"80px",titleMap:{addWeather:"添加天气信息",editWeather:"更新天气信息"},dialogStatus:""}},created:function(){this.loadData(this.currentPage,this.pagesize)},methods:{formatterColumn:function(e,t){var r=e.highestTemperature;return e.lowestTemperature+"~"+r},callOf:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},closeDialog:function(e){this.dialogFormVisible=!1,this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.pagesize=e,this.loadData(this.currentPage,this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,this.loadData(this.currentPage,this.pagesize)},search:function(){var e=this;if(""===this.days)this.loadData(this.currentPage,this.pagesize);else{var t="/weather/forecast/"+this.days;a.a.get(t,{params:{pageNumber:this.pageNumber,pageSize:this.pageSize}}).then(function(t){if("success"===t.data.msg){var r=t.data.data;e.tableData=r,e.totalCount=t.data.data.total}})}},addWeather:function(e){var t=this;this.dialogFormVisible=!0,this.dialogStatus="addWeather",this.$nextTick(function(){t.$refs[e].resetFields(),t.ruleForm.companyContacts.length=1})},handleEdit:function(e,t){this.ruleForm.date=t.date,this.ruleForm.weather=t.weather,this.dialogFormVisible=!0,this.ruleForm.highestTemperature=t.highestTemperature,this.ruleForm.lowestTemperature=t.lowestTemperature,this.ruleForm.windDirection=t.windDirection,this.ruleForm.windLevel=t.windLevel},saveWeather:function(e){var t=this;if("editWeather"===this.dialogStatus){var r={id:this.ruleForm.id,date:this.ruleForm.date,weather:this.ruleForm.weather,highestTemperature:this.ruleForm.highestTemperature,lowTemperature:this.ruleForm.lowestTemperature,windDirection:this.ruleForm.windDirection,windLevel:this.ruleForm.windLevel};console.log(r),a.a.put("/weather",r).then(function(e){"success"===e.data.msg?(t.dialogFormVisible=!1,t.$message({message:"编辑成功",type:"success"}),t.loadData(t.currentPage,t.pagesize)):t.$message({message:e.data.msg,type:"error"})})}else if("addWeather"===this.dialogStatus){var l={date:this.ruleForm.date,weather:this.ruleForm.weather,id:this.ruleForm.id,highestTemperature:this.ruleForm.highestTemperature,lowestTemperature:this.ruleForm.lowestTemperature,windDirection:this.ruleForm.windDirection,windLevel:this.ruleForm.windLeve};a.a.post("/weather",l).then(function(e){"success"===e.data.msg?(t.dialogFormVisible=!1,t.$message({message:"添加成功",type:"success"}),t.loadData(t.currentPage,t.pagesize)):t.$message({message:e.data.msg,type:"error"})})}},loadData:function(e,t){var r=this;a.a.get("/weather",{params:{pageNumber:e,pageSize:t}}).then(function(e){if("success"===e.data.msg){var t=e.data.data.rows;r.tableData=t,r.totalCount=e.data.data.total}})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pbody"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{staticStyle:{"padding-bottom":"20px","margin-left":"15px"},attrs:{placeholder:"搜索未来N天的天气情况"},model:{value:e.days,callback:function(t){e.days=t},expression:"days"}})],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{staticStyle:{"background-color":"#304156",border:"none"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),e.dialogFormVisible?r("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"时间",prop:"date"}},[r("el-input",{model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最低温",prop:"lowestTemperature"}},[r("el-input",{attrs:{width:"100px"},model:{value:e.ruleForm.lowestTemperature,callback:function(t){e.$set(e.ruleForm,"lowestTemperature",t)},expression:"ruleForm.lowestTemperature"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最高温",prop:"highestTemperature"}},[r("el-input",{model:{value:e.ruleForm.highestTemperature,callback:function(t){e.$set(e.ruleForm,"highestTemperature",t)},expression:"ruleForm.highestTemperature"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"天气",prop:"weather"}},[r("el-input",{model:{value:e.ruleForm.weather,callback:function(t){e.$set(e.ruleForm,"weather",t)},expression:"ruleForm.weather"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"风向",prop:"windDirection"}},[r("el-input",{model:{value:e.ruleForm.windDirection,callback:function(t){e.$set(e.ruleForm,"windDirection",t)},expression:"ruleForm.windDirection"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"风速",prop:"windLevel"}},[r("el-input",{model:{value:e.ruleForm.windLevel,callback:function(t){e.$set(e.ruleForm,"windLevel",t)},expression:"ruleForm.windLevel"}})],1),e._v(" "),r("el-row")],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveWeather("ruleForm")}}},[e._v("确 定")])],1)],1):e._e()],1),e._v(" "),r("el-table",{ref:"testTable",staticClass:"gtable",attrs:{data:e.tableData,"header-cell-style":{"background-color":"#f6f6f6"},border:""}},[r("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"newData",formatter:e.formatterColumn,label:"气温",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"weather",label:"天气",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"windDirection",label:"风向",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"windLevel",label:"风速",sortable:""}})],1),e._v(" "),r("el-pagination",{staticClass:"pstyle",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var o=r("VU/8")(l,i,!1,function(e){r("ouKj")},null,null);t.default=o.exports},ouKj:function(e,t,r){var a=r("AHvR");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("62856741",a,!0)}});